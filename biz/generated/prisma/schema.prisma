generator client {
  provider = "prisma-client-js"
  output   = "../biz/generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model operation_logs {
  id         String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id    String    @db.Uuid
  qq_number  String
  operation  String
  created_at DateTime  @default(now()) @db.Timestamptz(6)
  updated_at DateTime  @default(now()) @db.Timestamptz(6)
  deleted_at DateTime? @db.Timestamptz(6)
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model payment_orders {
  id           String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id      String    @db.Uuid
  qq_number    String
  out_trade_no String    @unique @db.VarChar(30)
  channel      Int       @db.SmallInt
  amount       Decimal   @db.Decimal(12, 2)
  status       Int       @default(0) @db.SmallInt
  created_at   DateTime  @default(now()) @db.Timestamptz(6)
  updated_at   DateTime  @default(now()) @db.Timestamptz(6)
  deleted_at   DateTime? @db.Timestamptz(6)

  @@index([out_trade_no], map: "idx_payment_orders_out_trade_no")
  @@index([qq_number], map: "idx_payment_orders_qq_number")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model user_play_logs {
  id             String                  @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  qq_number      String
  status         Int                     @default(0) @db.SmallInt
  start_time     DateTime                @default(now()) @db.Timestamptz(6)
  end_time       DateTime?               @db.Timestamptz(6)
  break_duration Unsupported("interval") @default(dbgenerated("'00:00:00'::interval"))
  created_at     DateTime                @default(now()) @db.Timestamptz(6)
  updated_at     DateTime                @default(now()) @db.Timestamptz(6)
  deleted_at     DateTime?               @db.Timestamptz(6)

  @@index([qq_number], map: "idx_user_play_logs_qq_number_idx")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model users {
  id                 String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  qq_number          String    @unique(map: "idx_users_qq_number_idx")
  nick_name          String
  role               String    @default("用户")
  status_expire_time DateTime  @default(dbgenerated("'2099-07-28 10:00:00+00'::timestamp with time zone")) @db.Timestamptz(6)
  status             Int       @default(1) @db.SmallInt
  source             String    @default("654627508")
  invited_by         String    @default("")
  discount           Decimal   @default(1) @db.Decimal(12, 2)
  total_time         BigInt
  total_amount       Decimal   @default(0) @db.Decimal(12, 2)
  play_count         BigInt    @default(0)
  last_come_time     DateTime? @db.Timestamptz(6)
  created_at         DateTime  @default(now()) @db.Timestamptz(6)
  updated_at         DateTime  @default(now()) @db.Timestamptz(6)
  deleted_at         DateTime? @db.Timestamptz(6)
}
